{"version":3,"sources":["../../src/controller/cntx.js"],"names":["config","db","api","get","req","res","Cntx","find","err","cntxs","send","json","findById","params","id","cntx","post","newCntx","name","body","isSecret","save","message","delete","remove","_id","put"],"mappings":";;;;;;AAAA;;AACA;;;;;;kBAEc,gBAAoB;AAAA,MAAjBA,MAAiB,QAAjBA,MAAiB;AAAA,MAATC,EAAS,QAATA,EAAS;;AAChC,MAAIC,MAAM,sBAAV;;AAEA;AACAA,MAAIC,GAAJ,CAAQ,GAAR,EAAa,UAACC,GAAD,EAAMC,GAAN,EAAc;AACzBC,mBAAKC,IAAL,CAAU,EAAV,EAAc,UAACC,GAAD,EAAMC,KAAN,EAAgB;AAC5B,UAAID,GAAJ,EAAS;AACPH,YAAIK,IAAJ,CAASF,GAAT;AACD;AACDH,UAAIM,IAAJ,CAASF,KAAT;AACD,KALD;AAMD,GAPD;;AASA;AACAP,MAAIC,GAAJ,CAAQ,MAAR,EAAgB,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC5BC,mBAAKM,QAAL,CAAcR,IAAIS,MAAJ,CAAWC,EAAzB,EAA6B,UAACN,GAAD,EAAMO,IAAN,EAAe;AAC1C,UAAIP,GAAJ,EAAS;AACPH,YAAIK,IAAJ,CAASF,GAAT;AACD;AACDH,UAAIM,IAAJ,CAASI,IAAT;AACD,KALD;AAMD,GAPD;;AASA;AACAb,MAAIc,IAAJ,CAAS,MAAT,EAAiB,UAACZ,GAAD,EAAMC,GAAN,EAAc;AAC7B,QAAIY,UAAU,IAAIX,cAAJ,EAAd;AACAW,YAAQC,IAAR,GAAed,IAAIe,IAAJ,CAASD,IAAxB;AACAD,YAAQG,QAAR,GAAmBhB,IAAIe,IAAJ,CAASC,QAA5B;;AAEAH,YAAQI,IAAR,CAAa,UAASb,GAAT,EAAc;AACzB,UAAIA,GAAJ,EAAS;AACPH,YAAIK,IAAJ,CAASF,GAAT;AACD,OAFD,MAEK;AACHH,YAAIM,IAAJ,CAAS,EAAEW,SAAS,yBAAX,EAAT;AACD;AACF,KAND;AAOD,GAZD;;AAcA;AACApB,MAAIqB,MAAJ,CAAW,MAAX,EAAmB,UAACnB,GAAD,EAAMC,GAAN,EAAc;AAC/BC,mBAAKkB,MAAL,CAAY;AACVC,WAAKrB,IAAIS,MAAJ,CAAWC;AADN,KAAZ,EAEG,UAACN,GAAD,EAAMO,IAAN,EAAe;AAChB,UAAIP,GAAJ,EAAS;AACPH,YAAIK,IAAJ,CAASF,GAAT;AACD;AACCH,UAAIM,IAAJ,CAAS,EAACW,SAAS,2BAAV,EAAT;AACD,KAPH;AAQD,GATD;;AAWA;AACApB,MAAIwB,GAAJ,CAAQ,MAAR,EAAgB,UAACtB,GAAD,EAAMC,GAAN,EAAc;AAC5BC,mBAAKM,QAAL,CAAcR,IAAIS,MAAJ,CAAWC,EAAzB,EAA6B,UAACN,GAAD,EAAMO,IAAN,EAAe;AAC1C,UAAIP,GAAJ,EAAS;AACPH,YAAIK,IAAJ,CAASF,GAAT;AACD;AACDO,WAAKG,IAAL,GAAYd,IAAIe,IAAJ,CAASD,IAArB;AACAH,WAAKK,QAAL,GAAgBhB,IAAIe,IAAJ,CAASC,QAAzB;;AAEAL,WAAKM,IAAL,CAAU,UAASb,GAAT,EAAc;AACtB,YAAIA,GAAJ,EAAS;AACPH,cAAIK,IAAJ,CAASF,GAAT;AACD;AACDH,YAAIM,IAAJ,CAAS,EAAEW,SAAS,mBAAX,EAAT;AACD,OALD;AAMD,KAbD;AAcD,GAfD;;AAiBA,SAAOpB,GAAP;AACD,C","file":"cntx.js","sourcesContent":["import { Router } from 'express';\nimport Cntx from '../model/cntx';\n\nexport default({ config, db }) => {\n  let api = Router();\n\n  // '/v1/cntx' - GET all test accts\n  api.get('/', (req, res) => {\n    Cntx.find({}, (err, cntxs) => {\n      if (err) {\n        res.send(err);\n      }\n      res.json(cntxs);\n    });\n  });\n\n  // '/v1/cntx/:id' - GET a specific test acct\n  api.get('/:id', (req, res) => {\n    Cntx.findById(req.params.id, (err, cntx) => {\n      if (err) {\n        res.send(err);\n      }\n      res.json(cntx);\n    });\n  });\n\n  // '/v1/cntx/add' - POST - add a test acct\n  api.post('/add', (req, res) => {\n    let newCntx = new Cntx();\n    newCntx.name = req.body.name;\n    newCntx.isSecret = req.body.isSecret;\n\n    newCntx.save(function(err) {\n      if (err) {\n        res.send(err);\n      }else{\n        res.json({ message: 'Cntx saved successfully' });\n      }\n    });\n  });\n\n  // '/v1/cntx/:id' - DELETE - remove a test acct\n  api.delete('/:id', (req, res) => {\n    Cntx.remove({\n      _id: req.params.id\n    }, (err, cntx) => {\n      if (err) {\n        res.send(err);\n      }\n        res.json({message: \"Cntx Successfully Removed\"});\n      });\n  });\n\n  // '/v1/cntx/:id' - PUT - update an existing record\n  api.put('/:id', (req, res) => {\n    Cntx.findById(req.params.id, (err, cntx) => {\n      if (err) {\n        res.send(err);\n      }\n      cntx.name = req.body.name;\n      cntx.isSecret = req.body.isSecret;\n\n      cntx.save(function(err) {\n        if (err) {\n          res.send(err);\n        }\n        res.json({ message: 'Cntx info updated' });\n      });\n    });\n  });\n\n  return api;\n}\n"]}