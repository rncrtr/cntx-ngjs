{"version":3,"sources":["../../src/controller/variable.js"],"names":["config","db","api","get","req","res","Variable","find","err","variables","send","json","findById","params","id","variable","post","newVariable","name","body","content","contentType","isSecret","save","message","delete","remove","_id","put"],"mappings":";;;;;;AAAA;;;;AACA;;AACA;;;;AACA;;;;;;kBAEc,gBAAoB;AAAA,MAAjBA,MAAiB,QAAjBA,MAAiB;AAAA,MAATC,EAAS,QAATA,EAAS;;AAChC,MAAIC,MAAM,sBAAV;;AAEA;AACAA,MAAIC,GAAJ,CAAQ,GAAR,EAAa,UAACC,GAAD,EAAMC,GAAN,EAAc;AACzBC,uBAASC,IAAT,CAAc,EAAd,EAAkB,UAACC,GAAD,EAAMC,SAAN,EAAoB;AACpC,UAAID,GAAJ,EAAS;AACPH,YAAIK,IAAJ,CAASF,GAAT;AACD;AACDH,UAAIM,IAAJ,CAASF,SAAT;AACD,KALD;AAMD,GAPD;;AASA;AACAP,MAAIC,GAAJ,CAAQ,MAAR,EAAgB,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC5BC,uBAASM,QAAT,CAAkBR,IAAIS,MAAJ,CAAWC,EAA7B,EAAiC,UAACN,GAAD,EAAMO,QAAN,EAAmB;AAClD,UAAIP,GAAJ,EAAS;AACPH,YAAIK,IAAJ,CAASF,GAAT;AACD;AACDH,UAAIM,IAAJ,CAASI,QAAT;AACD,KALD;AAMD,GAPD;;AASA;AACAb,MAAIc,IAAJ,CAAS,MAAT,EAAiB,UAACZ,GAAD,EAAMC,GAAN,EAAc;AAC7B,QAAIY,cAAc,IAAIX,kBAAJ,EAAlB;AACAW,gBAAYC,IAAZ,GAAmBd,IAAIe,IAAJ,CAASD,IAA5B;AACAD,gBAAYG,OAAZ,GAAsBhB,IAAIe,IAAJ,CAASC,OAA/B;AACAH,gBAAYI,WAAZ,GAA0BjB,IAAIe,IAAJ,CAASE,WAAnC;AACAJ,gBAAYK,QAAZ,GAAuBlB,IAAIe,IAAJ,CAASG,QAAhC;;AAEAL,gBAAYM,IAAZ,CAAiB,UAASf,GAAT,EAAc;AAC7B,UAAIA,GAAJ,EAAS;AACPH,YAAIK,IAAJ,CAASF,GAAT;AACD,OAFD,MAEK;AACHH,YAAIM,IAAJ,CAAS,EAAEa,SAAS,6BAAX,EAAT;AACD;AACF,KAND;AAOD,GAdD;;AAgBA;AACAtB,MAAIuB,MAAJ,CAAW,MAAX,EAAmB,UAACrB,GAAD,EAAMC,GAAN,EAAc;AAC/BC,uBAASoB,MAAT,CAAgB;AACdC,WAAKvB,IAAIS,MAAJ,CAAWC;AADF,KAAhB,EAEG,UAACN,GAAD,EAAMO,QAAN,EAAmB;AACpB,UAAIP,GAAJ,EAAS;AACPH,YAAIK,IAAJ,CAASF,GAAT;AACD;AACCH,UAAIM,IAAJ,CAAS,EAACa,SAAS,+BAAV,EAAT;AACD,KAPH;AAQD,GATD;;AAWA;AACAtB,MAAI0B,GAAJ,CAAQ,MAAR,EAAgB,UAACxB,GAAD,EAAMC,GAAN,EAAc;AAC5BC,uBAASM,QAAT,CAAkBR,IAAIS,MAAJ,CAAWC,EAA7B,EAAiC,UAACN,GAAD,EAAMO,QAAN,EAAmB;AAClD,UAAIP,GAAJ,EAAS;AACPH,YAAIK,IAAJ,CAASF,GAAT;AACD;AACDO,eAASG,IAAT,GAAgBd,IAAIe,IAAJ,CAASD,IAAzB;AACAH,eAASK,OAAT,GAAmBhB,IAAIe,IAAJ,CAASC,OAA5B;AACAL,eAASM,WAAT,GAAuBjB,IAAIe,IAAJ,CAASE,WAAhC;AACAN,eAASO,QAAT,GAAoBlB,IAAIe,IAAJ,CAASG,QAA7B;;AAEAP,eAASQ,IAAT,CAAc,UAASf,GAAT,EAAc;AAC1B,YAAIA,GAAJ,EAAS;AACPH,cAAIK,IAAJ,CAASF,GAAT;AACD;AACDH,YAAIM,IAAJ,CAAS,EAAEa,SAAS,uBAAX,EAAT;AACD,OALD;AAMD,KAfD;AAgBD,GAjBD;;AAmBA,SAAOtB,GAAP;AACD,C","file":"variable.js","sourcesContent":["import mongoose from 'mongoose';\nimport { Router } from 'express';\nimport Variable from '../model/variable';\nimport bodyParser from 'body-parser';\n\nexport default({ config, db }) => {\n  let api = Router();\n\n  // '/v1/variable' - GET all test accts\n  api.get('/', (req, res) => {\n    Variable.find({}, (err, variables) => {\n      if (err) {\n        res.send(err);\n      }\n      res.json(variables);\n    });\n  });\n\n  // '/v1/variable/:id' - GET a specific test acct\n  api.get('/:id', (req, res) => {\n    Variable.findById(req.params.id, (err, variable) => {\n      if (err) {\n        res.send(err);\n      }\n      res.json(variable);\n    });\n  });\n\n  // '/v1/variable/add' - POST - add a test acct\n  api.post('/add', (req, res) => {\n    let newVariable = new Variable();\n    newVariable.name = req.body.name;\n    newVariable.content = req.body.content;\n    newVariable.contentType = req.body.contentType;\n    newVariable.isSecret = req.body.isSecret;\n\n    newVariable.save(function(err) {\n      if (err) {\n        res.send(err);\n      }else{\n        res.json({ message: 'Variable saved successfully' });\n      }\n    });\n  });\n\n  // '/v1/variable/:id' - DELETE - remove a test acct\n  api.delete('/:id', (req, res) => {\n    Variable.remove({\n      _id: req.params.id\n    }, (err, variable) => {\n      if (err) {\n        res.send(err);\n      }\n        res.json({message: \"Variable Successfully Removed\"});\n      });\n  });\n\n  // '/v1/variable/:id' - PUT - update an existing record\n  api.put('/:id', (req, res) => {\n    Variable.findById(req.params.id, (err, variable) => {\n      if (err) {\n        res.send(err);\n      }\n      variable.name = req.body.name;\n      variable.content = req.body.content;\n      variable.contentType = req.body.contentType;\n      variable.isSecret = req.body.isSecret;\n\n      variable.save(function(err) {\n        if (err) {\n          res.send(err);\n        }\n        res.json({ message: 'Variable info updated' });\n      });\n    });\n  });\n\n  return api;\n}\n"]}