{"version":3,"sources":["../../src/middleware/authMiddleware.js"],"names":["TOKENTIME","SECRET","authenticate","secret","generateAccessToken","req","res","next","token","jwt","sign","id","user","expiresIn","respond","status","json","username","module","exports"],"mappings":";;AAAA;;;;AACA;;;;;;AAEA,IAAMA,YAAY,KAAG,EAAH,GAAM,EAAN,GAAS,EAA3B,C,CAA+B;AAC/B,IAAMC,SAAS,kBAAf;;AAEA,IAAIC,eAAe,0BAAW,EAAEC,QAAQF,MAAV,EAAX,CAAnB;;AAEA,IAAIG,sBAAsB,SAAtBA,mBAAsB,CAACC,GAAD,EAAKC,GAAL,EAAUC,IAAV,EAAmB;AACzCF,QAAIG,KAAJ,GAAYH,IAAIG,KAAJ,IAAa,EAAzB;AACAH,QAAIG,KAAJ,GAAYC,uBAAIC,IAAJ,CAAS;AACjBC,YAAIN,IAAIO,IAAJ,CAASD;AADI,KAAT,EAETV,MAFS,EAED;AACPY,mBAAWb;AADJ,KAFC,CAAZ;AAKAO;AACH,CARD;;AAUA,IAAIO,UAAU,SAAVA,OAAU,CAACT,GAAD,EAAMC,GAAN,EAAc;AACxBA,QAAIS,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAClBJ,cAAMP,IAAIY,QADQ;AAElBT,eAAOH,IAAIG;AAFO,KAArB;AAIH,CALD;;AAOAU,OAAOC,OAAP,GAAiB,EAAEjB,0BAAF,EAAgBE,wCAAhB,EAAqCU,gBAArC,EAAjB","file":"authMiddleware.js","sourcesContent":["import jwt from 'jsonwebtoken';\nimport expressJwt from 'express-jwt';\n\nconst TOKENTIME = 60*60*24*30; // 30 days\nconst SECRET = \"h1v3m1nd51v1510n\";\n\nlet authenticate = expressJwt({ secret: SECRET });\n\nlet generateAccessToken = (req,res, next) => {\n    req.token = req.token || {};\n    req.token = jwt.sign({\n        id: req.user.id,\n    }, SECRET, {\n        expiresIn: TOKENTIME\n    });\n    next();\n}\n\nlet respond = (req, res) => {\n    res.status(200).json({\n       user: req.username,\n       token: req.token\n    });\n}\n\nmodule.exports = { authenticate, generateAccessToken, respond }"]}