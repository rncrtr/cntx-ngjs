<!DOCTYPE html>
<html lang="en" ng-app="alloy" class="no-js">
<head>
    <base href="/">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Cntx</title>
    <meta name="description" content="">
    <meta name="theme-color" content="#333333">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Alloy NGJS Starter Kit">
    <script type="text/javascript">
        // preload them images
        // preloads = "about,contact,login".split(",")
        // var tempImg = []
        // for(var x=0;x<preloads.length;x++) {
        //     tempImg[x] = new Image()
        //     tempImg[x].src = '/assets/images/'+preloads[x]+".jpg"
        // }
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
    <link rel="stylesheet" href="assets/styles/bs4.1.1.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css">
    <link rel='stylesheet' href='assets/styles/textAngular.css'>
    <link rel="stylesheet" href="app.css">
</head>
<body id="body">
  <div class="container-fluid">
    <div ng-view autoscroll></div>
  </div>
<!--HOME-->  
  <script type="text/ng-template" id="home.html">
    <div class="row"> 
      <div class="col-md-9">
        <div class="row">
          <div class="col text-primary h3" style="padding-top: 5px;">{{currentCtx.name}}</div>
          <div class="col-2" style="margin-top: 10px;"><button class="btn btn-sm btn-primary" ng-click="toggle('.new-note')" ng-show="currentCtx._id">New Note</button></div>
        </div>
        <div class="new-note border border-primary rounded" style="padding: 10px; display: none;" >
          <h4>New Note</h4>
          <div class="form-group">
            <input type="text" ng-model="newNoteData.title" class="form-control" placeholder="Title" /><br />
            <text-angular ng-model="newNoteData.content" class="editor" placeholder="Lorem loved ipsum"></text-angular>
            <!--<textarea ng-model="newNoteData.content" class="form-control" placeholder="Lorem loved ipsum"></textarea>-->
              <br /><button class="btn btn-sm btn-primary new-note-save" ng-click="newNote()">Save</button>
              <div class="errors text-danger" style="display: none;">
                <div ng-repeat="err in errMsgs">{{err}}<br /></div>
              </div>
          </div>
        </div>
        <div ng-repeat="note in notes | orderBy: '-ts' | filter: (!!currentCtx._id || undefined) && {cntxId: currentCtx._id}">
          <h2>{{note.name}}</h2>
          <small>{{note.ts | timeago}}</small><br />
          {{note.content}}
          <br /><br />
        </div>
        <div ng-show="filteredPostsCount > 0">
          No posts found
        </div>
      </div>
      <div class="col-md-3">
        <div class="row">
          <div class="col"><h2>CNTXs</h2></div>
          <div class="col" style="margin-top: 10px;"><button class="btn btn-sm btn-primary" ng-click="toggle('.new-context')">New Cntx</button></div>
        </div>
        <div class="new-context border border-primary rounded" style="display: none; padding: 10px">
          <h5>New Context</h5>
          <input type="text" ng-model="newContext.title" />
          <br /><button class="btn btn-sm btn-primary">Save</button>
        <br /><br /></div>
          <a href="#" ng-click="setFilter(null)">*** All Posts ***</a>
        <div ng-repeat="ctx in cntxs">
          <a href="#" ng-click="setFilter(ctx._id)">{{ctx.name}}</a>
        </div>
      </div>
    </div>
  </script>
<!--/HOME-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.6.0/angular.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.6.0/angular-route.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src='/assets/scripts/textAngular-rangy.min.js'></script>
  <script src='/assets/scripts/textAngular-sanitize.min.js'></script>
  <script src='/assets/scripts/textAngular.min.js'></script>
  <script src="jquery.fn.js"></script>
  <script src="app.js"></script>
  <script src="controllers.js"></script>
</body>
</html>